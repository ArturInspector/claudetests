<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó–∞–¥–∞—á–∏ - Claudetests</title>
    <link rel="stylesheet" href="/static/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <a href="/" class="logo">Claudetests</a>
            <nav class="nav">
                <a href="/">–ì–ª–∞–≤–Ω–∞—è</a>
                <a href="/practice">–í–æ–ø—Ä–æ—Å—ã</a>
                <a href="/tasks" class="active">–ó–∞–¥–∞—á–∏</a>
                <a href="/stats">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
            </nav>
        </div>
    </header>

    <main style="max-width: 1400px; margin: 0 auto; padding: 2rem;">
        <!-- –í—ã–±–æ—Ä —Ç–µ–º—ã –∏ –±–ª–æ–∫–∞ -->
        <div id="taskSelection" class="mb-4">
            <h1 style="font-size: 2rem; margin-bottom: 1rem;">–í—ã–±–µ—Ä–∏ –∑–∞–¥–∞—á—É</h1>
            
            <!-- –§–∏–ª—å—Ç—Ä—ã -->
            <div class="card mb-4" style="padding: 1.5rem;">
                <div style="display: flex; gap: 1rem; flex-wrap: wrap; align-items: center;">
                    <div>
                        <label style="display: block; font-weight: 600; margin-bottom: 0.5rem; font-size: 0.875rem;">–ë–ª–æ–∫:</label>
                        <select id="blockFilter" class="select-input">
                            <option value="">–í—Å–µ –±–ª–æ–∫–∏</option>
                            <option value="write">Write (–Ω–∞–ø–∏—Å–∞—Ç—å –∫–æ–¥)</option>
                            <option value="review">Review (code review)</option>
                        </select>
                    </div>
                    <div>
                        <label style="display: block; font-weight: 600; margin-bottom: 0.5rem; font-size: 0.875rem;">–Ø–∑—ã–∫:</label>
                        <select id="languageFilter" class="select-input">
                            <option value="">–í—Å–µ —è–∑—ã–∫–∏</option>
                            <option value="go">Go</option>
                            <option value="solidity">Solidity</option>
                        </select>
                    </div>
                    <div>
                        <label style="display: block; font-weight: 600; margin-bottom: 0.5rem; font-size: 0.875rem;">–°–ª–æ–∂–Ω–æ—Å—Ç—å:</label>
                        <select id="difficultyFilter" class="select-input">
                            <option value="">–í—Å–µ</option>
                            <option value="Easy">Easy</option>
                            <option value="Medium">Medium</option>
                            <option value="Hard">Hard</option>
                        </select>
                    </div>
                    <div style="flex: 1;"></div>
                    <button id="applyFiltersBtn" class="btn btn-primary">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                </div>
            </div>
            
            <!-- –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á -->
            <div id="tasksList" class="grid grid-2">
                <!-- –ó–∞–¥–∞—á–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
        </div>

        <!-- –û–±–ª–∞—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Å –∑–∞–¥–∞—á–µ–π -->
        <div id="taskArea" class="hidden">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–¥–∞—á–∏ -->
            <div class="flex-between mb-4">
                <div>
                    <h2 id="taskTitle" style="margin-bottom: 0.25rem;"></h2>
                    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; margin-top: 0.5rem;">
                        <span id="taskTypeBadge" class="badge"></span>
                        <span id="taskBlockBadge" class="badge"></span>
                        <span id="taskDifficultyBadge" class="difficulty-badge"></span>
                        <span id="taskLanguageBadge" class="badge badge-tag"></span>
                    </div>
                </div>
                <button id="backToTasksBtn" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥ –∫ –∑–∞–¥–∞—á–∞–º</button>
            </div>

            <!-- –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ -->
            <div class="card mb-4">
                <h3 style="margin-bottom: 1rem;">–û–ø–∏—Å–∞–Ω–∏–µ</h3>
                <div id="taskDescription" style="line-height: 1.8;"></div>
                <div id="taskRequirements" class="mt-4"></div>
            </div>

            <!-- Write –∑–∞–¥–∞—á–∞ -->
            <div id="writeTaskSection" class="hidden">
                <!-- Starter Code -->
                <div class="card mb-4">
                    <h3 style="margin-bottom: 1rem;">üìù Starter Code</h3>
                    <div id="codeEditor" style="height: 400px; border: 1px solid var(--border-color); border-radius: 0.5rem;"></div>
                </div>

                <!-- –¢–µ—Å—Ç—ã (–µ—Å–ª–∏ –µ—Å—Ç—å) -->
                <div id="testsSection" class="card mb-4 hidden">
                    <h3 style="margin-bottom: 1rem;">üß™ –¢–µ—Å—Ç—ã</h3>
                    <pre id="testsCode"><code></code></pre>
                </div>

                <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
                <div class="flex gap-2 mb-4">
                    <button id="submitCodeBtn" class="btn btn-primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ</button>
                    <button id="showHintsBtn" class="btn btn-secondary">–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫–∏</button>
                </div>

                <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ -->
                <div id="compilationResult" class="hidden"></div>
            </div>

            <!-- Review –∑–∞–¥–∞—á–∞ -->
            <div id="reviewTaskSection" class="hidden">
                <!-- –ö–æ–¥ –æ—Ç –ò–ò -->
                <div class="card mb-4">
                    <h3 style="margin-bottom: 1rem;">ü§ñ –ö–æ–¥ –æ—Ç –ò–ò</h3>
                    <pre id="aiCode"><code></code></pre>
                </div>

                <!-- –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Ä–µ–≤—å—é -->
                <div class="card mb-4">
                    <h3 style="margin-bottom: 1rem;">‚ùì –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Ä–µ–≤—å—é</h3>
                    <div id="reviewQuestions"></div>
                </div>

                <!-- –§–æ—Ä–º–∞ –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ -->
                <div class="card mb-4">
                    <h3 style="margin-bottom: 1rem;">üìù –¢–≤–æ–π —Ä–µ–≤—å—é</h3>
                    
                    <div class="mb-4">
                        <label style="display: block; font-weight: 600; margin-bottom: 0.5rem;">
                            –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (–ø–æ –æ–¥–Ω–æ–π –Ω–∞ —Å—Ç—Ä–æ–∫—É):
                        </label>
                        <textarea id="foundIssues" 
                                  placeholder="1. Race condition –≤ NextBackend()&#10;2. –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫&#10;3. ..."
                                  style="min-height: 150px; font-family: monospace;"></textarea>
                    </div>

                    <div class="mb-4">
                        <label style="display: block; font-weight: 600; margin-bottom: 0.5rem;">
                            –£–ª—É—á—à–µ–Ω–Ω—ã–π –∫–æ–¥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
                        </label>
                        <div id="improvedCodeEditor" style="height: 300px; border: 1px solid var(--border-color); border-radius: 0.5rem;"></div>
                    </div>

                    <button id="submitReviewBtn" class="btn btn-primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–≤—å—é</button>
                </div>

                <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–µ–≤—å—é -->
                <div id="reviewResult" class="hidden"></div>
            </div>
        </div>

        <!-- –ó–∞–≥—Ä—É–∑–∫–∞ -->
        <div id="loadingSpinner" class="hidden">
            <div class="spinner"></div>
        </div>
    </main>

    <script src="/static/app.js"></script>
    <script src="/static/tasks.js"></script>
    
    <style>
        .badge-resource {
            background: #ede9fe;
            color: #6b21a8;
        }
        
        #codeEditor, #improvedCodeEditor {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
        }
        
        .grid.grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
        }
        
        @media (max-width: 768px) {
            .grid.grid-2 {
                grid-template-columns: 1fr;
            }
        }
    </style>
</body>
</html>

